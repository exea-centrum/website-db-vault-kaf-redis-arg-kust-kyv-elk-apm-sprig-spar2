apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ${NAMESPACE}

resources:
  - spring-app-deployment.yaml
  - kafka-deployment.yaml
  - apm-server-deployment.yaml
  - mongodb.yaml
  - elasticsearch.yaml
  - logstash.yaml
  - kibana.yaml
  - spark-master.yaml
  - spark-worker.yaml
  - ingress-extended.yaml

images:
  - name: spring-app
    newName: ${REGISTRY}/spring-app
    newTag: latest

configMapGenerator:
  - name: mongodb-config
    literals:
      - database=surveys
      - host=mongodb-service
      - port=27017

secretGenerator:
  - name: mongodb-secret
    literals:
      - username=admin
      - password=password
  - name: kibana-auth
    literals:
      - auth=admin:password
